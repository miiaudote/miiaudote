<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>MiiAudote</title>

	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap.css') }}">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

	<link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='icons/favicon.ico') }}">

	<script src="{{ url_for('static', filename='bootstrap/js/bootstrap.js') }}"></script>
	<script src="{{ url_for('static', filename='scripts/messenger.js') }}"></script>
	<script src="{{ url_for('static', filename='scripts/search.js') }}"></script>
</head>

<body class="bg-body-secondary">
	<!-- MISC -->
	<!-- RECIPIENT MESSAGE -->
	<template id="senderTemplate">
		<div class="d-flex flex-row mx-1 my-1 justify-content-end">
			<div class="bg-primary rounded-3 text-light m-1 p-2" id="messageBubble" style="width: fit-content; height: fit-content;">
			</div>

			<img class="d-block object-fit-fill" id="messageImg" style="border-radius: 50%; height: 4em;">
		</div>
	</template>

	<!-- SENDER MESSAGE -->
	<template id="recipientTemplate">
		<div class="d-flex flex-row mx-1 my-1">
			<img class="d-block object-fit-fill" id="messageImg" style="border-radius: 50%; height: 4em;">

			<div class="bg-secondary rounded-3 text-light m-1 p-2" id="messageBubble" style="width: fit-content; height: fit-content;">
			</div>
		</div>
	</template>

	<!-- CONTACT PFP -->
	<template id="contactTemplate">
		<div class="d-flex text-light align-items-center btn btn-dark p-0 m-md-2">
			<img class="d-block object-fit-fill p-1" id="contactImg" style="border-radius: 50%; height: 4em;">
			<span class="d-none d-md-block" style="width: 100%; word-break: break-all;" id="contactName"></span>
		</div>
	</template>

	<!-- MODAL SEARCH -->
	<div class="modal fade" id="searchModal" tabindex="-1">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5">Pesquisa de Usuário</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
				</div>
				<div class="modal-body">
					<input type="text" placeholder="Pesquisar" id="searchBar" class="form-control">
					<ul class="overflow-auto d-none my-2" id="searchList" style="max-height: 10vh">
					</ul>
				</div>
			</div>
		</div>
	</div>

	<!-- MODAL POST -->
	<div class="modal fade" id="postModal" tabindex="-1">
		<div class="modal-dialog modal-dialog-centered needs-validation" novalidate>
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5">Postar</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
				</div>
				<div class="modal-body">
					<form method="POST" action="" enctype="multipart/form-data">
						{{ postForm.hidden_tag() }}
						<div class="mb-3">
							<label class="form-label">Informações do Pet</label>
							{{ postForm.petName(class="form-control", placeholder="Nome do Pet") }}
						</div>
						<div class="mb-3">
							{{ postForm.petRace(class="form-control") }}
						</div>
						<div class="mb-3">
							{{ postForm.petAge(class="form-control") }}
						</div>
						<div class="mb-3">
							{{ postForm.petSex(class="form-control") }}
						</div>
						<div class="mb-3">
							{{ postForm.petSize(class="form-control") }}
						</div>
						<div class="mb-3">
							<label class="form-label">Localização do Pet</label>
							<select class="form-control UFSelect" data-select-target="postUF">
								<option value="AC">AC</option>
								<option value="AL">AL</option>
								<option value="AM">AM</option>
								<option value="AP">AP</option>
								<option value="BA">BA</option>
								<option value="CE">CE</option>
								<option value="DF">DF</option>
								<option value="ES">ES</option>
								<option value="GO">GO</option>
								<option value="MA">MA</option>
								<option value="MG">MG</option>
								<option value="MS">MS</option>
								<option value="MT">MT</option>
								<option value="PA">PA</option>
								<option value="PB">PB</option>
								<option value="PE">PE</option>
								<option value="PI">PI</option>
								<option value="PR">PR</option>
								<option value="RJ">RJ</option>
								<option value="RN">RN</option>
								<option value="RO">RO</option>
								<option value="RR">RR</option>
								<option value="RS">RS</option>
								<option value="SC">SC</option>
								<option value="SE">SE</option>
								<option value="SP">SP</option>
								<option value="TO">TO</option>
							</select>
						</div>
						<div class="mb-3">
							{{ postForm.location(class="form-control", id="postUF") }}
						</div>
						<div class="mb-3">
							<label class="form-label">Descrição do Pet</label>
							{{ postForm.petDescription(class="form-control", maxlength="500") }}
						</div>

						<label class="form-label">Selecione imagens</label>
						<div class="d-flex flex-row w-100">
							{{ postForm.submit(class="btn btn-primary") }}
							{{ postForm.images(class="form-control mx-2", type="file", accept="image/*") }}
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	<!-- PC SCREEN -->
	<main class="d-flex flex-row d-none d-lg-flex">
		<!-- NAV PC SIDEBAR -->
		<nav class="d-flex flex-column p-3 bg-dark" style="width: 15rem;">
			<img class="rounded-3 w-100 h-25" src="{{ url_for('static', filename='images/logo.svg') }}">

			<ul class="navbar nav-pills flex-column mb-auto link-light align-items-start mx-4">
				<a type="button" class="btn btn-dark m-1 align-items-center d-flex fs-5"
					href="{{ url_for('dashboard') }}"><i class="bi bi-house-fill px-2 fs-4"></i>Home</a>
				<a type="button" class="btn btn-dark m-1 align-items-center d-flex fs-5" data-bs-toggle="modal"
					data-bs-target="#postModal"><i class="bi bi-plus-square px-2 fs-4"></i>Criar</a>
				<a type="button" class="btn btn-dark m-1 align-items-center d-flex fs-5"
					href="{{ url_for('profile', id=session['user'].id) }}"><i
						class="bi bi-person-circle px-2 fs-4"></i>Perfil</a>
				<a type="button" class="btn btn-dark m-1 align-items-center d-flex fs-5" data-bs-toggle="modal"
					data-bs-target="#searchModal"><i class="bi bi-search px-2 fs-5"></i>Pesquisar</a>
			</ul>

			<div class="dropdown">
				<a href="#" class="text-decoration-none dropdown-toggle fs-5 text-light" style="word-break: break-all;"
					data-bs-toggle="dropdown">
					{{ session['user'].username }}
				</a>
				<ul class="dropdown-menu text-small shadow">
					<li><a class="dropdown-item" href="{{url_for('logout')}}">Sair</a></li>
				</ul>
			</div>
		</nav>

		<!-- PC FEED -->
		<div class="d-flex flex-row flex-fill overflow-auto vh-100 feed">
			<!-- TEXTING AREA -->
			<div style="width: 100%;">
				<div class="d-flex flex-column h-100">
					<!-- MESSAGES AREA -->
					<div class="flex-grow-1 overflow-auto" id="chatContainer">
					</div>

					<!-- CONTROLS AREA -->
					<div class="d-flex flex-row">
						<textarea type="text" maxlength="500" rows="1" style="max-height: 10em; resize: none;"
							class="form-control" id="messageTextArea"></textarea>
						<button style="width: 8%;" class="btn btn-primary" id="sendMessageBtn"><i
								class="bi-send-fill"></i></button>
					</div>
				</div>
			</div>

			<!-- CONTACTS BAR -->
			<div class="d-flex bg-dark flex-column overflow-auto gap-1" id="contactsBar" style="min-width: 15rem;">
			</div>
		</div>
	</main>

	<!-- MOBILE SCREEN -->
	<main class="d-flex flex-column vh-100 d-lg-none">
		<!-- MOBILE TOP NAV -->
		<nav class="navbar d-flex flex-row align-items-center bg-dark flex-nowrap">
			<div class="flex-grow-1">
				<img class="m-2 w-100" src="{{ url_for('static', filename='images/logo_inverted.svg') }}">
			</div>
			<div class="flex-shrink-0 ms-3 d-flex">
				<a type="button" class="btn btn-dark align-items-center d-flex" data-bs-toggle="modal"
					data-bs-target="#searchModal"><i class="bi bi-search px-2 fs-1"></i></a>
				<a type="button" class="btn btn-dark align-items-center d-flex" href="{{url_for('logout')}}"><i
						class="bi bi-box-arrow-left px-2 fs-1"></i></a>
			</div>
		</nav>

		<!-- FEED AREA -->
		<div class="d-flex flex-row flex-fill overflow-auto feed">
			<!-- TEXTING AREA -->
			<div style="width: 84%;">
				<div class="d-flex flex-column h-100">
					<!-- MESSAGES AREA -->
					<div class="flex-grow-1 overflow-auto" id="chatContainer">
					</div>

					<!-- CONTROLS AREA -->
					<div class="d-flex flex-row">
						<textarea type="text" maxlength="500" rows="1" style="max-height: 10em; resize: none;"
							class="form-control" id="messageTextArea"></textarea>
						<button class="btn btn-primary" id="sendMessageBtn"><i class="bi-send-fill"></i></button>
					</div>
				</div>
			</div>

			<!-- CONTACTS BAR -->
			<div class="d-flex bg-dark flex-column overflow-auto gap-1" id="contactsBar" style="width: 16%;">
			</div>
		</div>

		<!-- MOBILE NAV BOTTOM BAR -->
		<nav class="navbar bg-dark justify-content-center flex-nowrap">
			<ul class="navbar nav-pills flex-row justify-content-center mb-auto link-light">
				<a type="button" class="btn btn-dark align-items-center d-flex" href="{{ url_for('dashboard') }}"><i
						class="bi bi-house-fill px-2 fs-1"></i></a>
				<a type="button" class="btn btn-dark align-items-center d-flex" data-bs-toggle="modal"
					data-bs-target="#postModal"><i class="bi bi-plus-square px-2 fs-1"></i></a>
				<a type="button" class="btn btn-dark align-items-center d-flex"
					href="{{ url_for('profile', id=session['user'].id) }}"><i
						class="bi bi-person-circle px-2 fs-1"></i></a>
			</ul>
		</nav>
	</main>
</body>

</html>